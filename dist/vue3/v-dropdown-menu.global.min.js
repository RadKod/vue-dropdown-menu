!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("vue")):"function"==typeof define&&define.amd?define(["vue"],o):(e="undefined"!=typeof globalThis?globalThis:e||self).DropdownMenu=o(e.Vue)}(this,(function(e){"use strict";var o=e.defineComponent({name:"DropdownMenu",props:{isOpen:{type:Boolean,required:!1,default:!1},mode:{type:String,required:!1,default:"click"},dropup:{type:Boolean,required:!1,default:!1},direction:{type:String,required:!1,default:"left"},closeOnClickOutside:{type:Boolean,required:!1,default:!0},withDropdownCloser:{type:Boolean,required:!1,default:!1},containerZIndex:{type:String,required:!1,default:"994"},overlay:{type:Boolean,required:!1,default:!0},overlayBgColor:{type:String,required:!1,default:"rgba(0, 0, 0, 0.2)"},overlayZIndex:{type:String,required:!1,default:"992"},transition:{type:String,required:!1,default:"default"}},setup(o,n){let{emit:t}=n;const r="v-dropdown-menu",i=e.ref(null),d=e.ref(null),l=e.ref(null),s=e.reactive({isOpen:o.isOpen,mode:o.mode,dropup:o.dropup,direction:o.direction,closeOnClickOutside:o.closeOnClickOutside,withDropdownCloser:o.withDropdownCloser,containerZIndex:o.containerZIndex,overlay:o.overlay,overlayBgColor:o.overlayBgColor,overlayZIndex:o.overlayZIndex,transition:o.transition}),a=e.computed((()=>s.isOpen?`${r}--active`:null)),c=e.computed((()=>"click"===s.mode?`${r}--mode-click`:`${r}--mode-hover`)),u=e.computed((()=>s.dropup?`${r}--dropup`:null)),p=e.computed((()=>{let e=null;return e="left"===s.direction?`${r}--direction-left`:"center"===s.direction?`${r}--direction-center`:`${r}--direction-right`,e}));e.watch((()=>o.isOpen),(e=>{"click"===s.mode&&(e?setTimeout((()=>{m()}),1):setTimeout((()=>{v()}),1))})),e.watch((()=>s.isOpen),(e=>{"click"===s.mode&&t(e?"opened":"closed",o)})),e.onMounted((()=>{h(),e.nextTick((()=>{s.closeOnClickOutside&&f()})),g()})),e.onBeforeUnmount((()=>{y(),k()}));const m=()=>{s.isOpen=!0},v=()=>{s.isOpen=!1},f=()=>{window.addEventListener("click",w)},w=e=>{s.isOpen&&(i.value.contains(e.target)||(s.isOpen=!1))},y=()=>{s.closeOnClickOutside&&window.removeEventListener("click",w)},h=()=>{if(s.withDropdownCloser){i.value.querySelectorAll("[dropdown-closer]").forEach((e=>{e.addEventListener("click",(()=>{s.isOpen=!1}))}))}},g=()=>{window.addEventListener("popstate",(()=>{s.isOpen&&(s.isOpen=!1)}))},k=()=>{window.removeEventListener("popstate",g)};return{rootRef:i,triggerRef:d,overlayRef:l,menu:s,show:m,hide:v,activeClass:a,modeClass:c,dropupClass:u,directionClass:p}}});const n={class:"v-dropdown-menu__header"},t={class:"v-dropdown-menu__body"},r={class:"v-dropdown-menu__footer"},i={class:"v-dropdown-menu__header"},d={class:"v-dropdown-menu__body"},l={class:"v-dropdown-menu__footer"};return o.render=function(o,s,a,c,u,p){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["v-dropdown-menu",[o.activeClass,o.modeClass,o.dropupClass,o.directionClass]]),ref:"rootRef"},["click"===o.menu.mode?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",{class:"v-dropdown-menu__trigger",ref:"triggerRef",onClick:s[0]||(s[0]=e.withModifiers((e=>o.menu.isOpen=!o.menu.isOpen),["prevent"]))},[e.renderSlot(o.$slots,"trigger")],512),e.createVNode(e.Transition,{mode:"out-in",name:o.menu.transition},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("div",{class:"v-dropdown-menu__container",style:e.normalizeStyle({"z-index":o.menu.containerZIndex})},[e.createElementVNode("div",n,[e.renderSlot(o.$slots,"header")]),e.createElementVNode("div",t,[e.renderSlot(o.$slots,"body")]),e.createElementVNode("div",r,[e.renderSlot(o.$slots,"footer")])],4),[[e.vShow,o.menu.isOpen]])])),_:3},8,["name"])],64)):e.createCommentVNode("",!0),"hover"===o.menu.mode?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("div",{class:"v-dropdown-menu__trigger",ref:"triggerRef",onMouseover:s[1]||(s[1]=e.withModifiers((function(){return o.show&&o.show(...arguments)}),["prevent"])),onMouseleave:s[2]||(s[2]=e.withModifiers((function(){return o.hide&&o.hide(...arguments)}),["prevent"]))},[e.renderSlot(o.$slots,"trigger")],544),e.createVNode(e.Transition,{name:o.menu.transition},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("div",{class:"v-dropdown-menu__container",style:e.normalizeStyle({"z-index":o.menu.containerZIndex}),onMouseover:s[3]||(s[3]=e.withModifiers((function(){return o.show&&o.show(...arguments)}),["prevent"])),onMouseleave:s[4]||(s[4]=e.withModifiers((function(){return o.hide&&o.hide(...arguments)}),["prevent"]))},[e.createElementVNode("div",i,[e.renderSlot(o.$slots,"header")]),e.createElementVNode("div",d,[e.renderSlot(o.$slots,"body")]),e.createElementVNode("div",l,[e.renderSlot(o.$slots,"footer")])],36),[[e.vShow,o.menu.isOpen]])])),_:3},8,["name"])],64)):e.createCommentVNode("",!0),o.menu.overlay&&o.menu.closeOnClickOutside&&"click"===o.menu.mode?e.withDirectives((e.openBlock(),e.createElementBlock("div",{key:2,class:"v-dropdown-menu__overlay",ref:"overlayRef",style:e.normalizeStyle({"background-color":o.menu.overlayBgColor,"z-index":o.menu.overlayZIndex}),onMousedown:s[5]||(s[5]=e.withModifiers((function(){return o.hide&&o.hide(...arguments)}),["prevent"]))},null,36)),[[e.vShow,o.menu.isOpen]]):e.createCommentVNode("",!0)],2)},(()=>{const e=o;return e.install=o=>{o.component("DropdownMenu",e)},e})()}));
