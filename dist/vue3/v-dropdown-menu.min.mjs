import{defineComponent as e,ref as n,reactive as o,computed as r,watch as t,onMounted as i,nextTick as d,onBeforeUnmount as l,openBlock as s,createElementBlock as u,normalizeClass as a,Fragment as c,createElementVNode as p,withModifiers as v,renderSlot as m,createVNode as f,Transition as w,withCtx as y,withDirectives as O,normalizeStyle as g,vShow as h,createCommentVNode as _}from"vue";var C=e({name:"DropdownMenu",props:{isOpen:{type:Boolean,required:!1,default:!1},mode:{type:String,required:!1,default:"click"},dropup:{type:Boolean,required:!1,default:!1},direction:{type:String,required:!1,default:"left"},closeOnClickOutside:{type:Boolean,required:!1,default:!0},withDropdownCloser:{type:Boolean,required:!1,default:!1},containerZIndex:{type:String,required:!1,default:"994"},overlay:{type:Boolean,required:!1,default:!0},overlayBgColor:{type:String,required:!1,default:"rgba(0, 0, 0, 0.2)"},overlayZIndex:{type:String,required:!1,default:"992"},transition:{type:String,required:!1,default:"default"}},setup(e,s){let{emit:u}=s;const a="v-dropdown-menu",c=n(null),p=n(null),v=n(null),m=o({isOpen:e.isOpen,mode:e.mode,dropup:e.dropup,direction:e.direction,closeOnClickOutside:e.closeOnClickOutside,withDropdownCloser:e.withDropdownCloser,containerZIndex:e.containerZIndex,overlay:e.overlay,overlayBgColor:e.overlayBgColor,overlayZIndex:e.overlayZIndex,transition:e.transition}),f=r((()=>m.isOpen?`${a}--active`:null)),w=r((()=>"click"===m.mode?`${a}--mode-click`:`${a}--mode-hover`)),y=r((()=>m.dropup?`${a}--dropup`:null)),O=r((()=>{let e=null;return e="left"===m.direction?`${a}--direction-left`:"center"===m.direction?`${a}--direction-center`:`${a}--direction-right`,e}));t((()=>e.isOpen),(e=>{"click"===m.mode&&(e?setTimeout((()=>{g()}),1):setTimeout((()=>{h()}),1))})),t((()=>m.isOpen),(n=>{"click"===m.mode&&u(n?"opened":"closed",e)})),i((()=>{$(),d((()=>{m.closeOnClickOutside&&_()})),x()})),l((()=>{k(),q()}));const g=()=>{m.isOpen=!0},h=()=>{m.isOpen=!1},_=()=>{window.addEventListener("click",C)},C=e=>{m.isOpen&&(c.value.contains(e.target)||(m.isOpen=!1))},k=()=>{m.closeOnClickOutside&&window.removeEventListener("click",C)},$=()=>{if(m.withDropdownCloser){c.value.querySelectorAll("[dropdown-closer]").forEach((e=>{e.addEventListener("click",(()=>{m.isOpen=!1}))}))}},x=()=>{window.addEventListener("popstate",(()=>{m.isOpen&&(m.isOpen=!1)}))},q=()=>{window.removeEventListener("popstate",x)};return{rootRef:c,triggerRef:p,overlayRef:v,menu:m,show:g,hide:h,activeClass:f,modeClass:w,dropupClass:y,directionClass:O}}});const k={class:"v-dropdown-menu__header"},$={class:"v-dropdown-menu__body"},x={class:"v-dropdown-menu__footer"},q={class:"v-dropdown-menu__header"},B={class:"v-dropdown-menu__body"},I={class:"v-dropdown-menu__footer"};C.render=function(e,n,o,r,t,i){return s(),u("div",{class:a(["v-dropdown-menu",[e.activeClass,e.modeClass,e.dropupClass,e.directionClass]]),ref:"rootRef"},["click"===e.menu.mode?(s(),u(c,{key:0},[p("div",{class:"v-dropdown-menu__trigger",ref:"triggerRef",onClick:n[0]||(n[0]=v((n=>e.menu.isOpen=!e.menu.isOpen),["prevent"]))},[m(e.$slots,"trigger")],512),f(w,{mode:"out-in",name:e.menu.transition},{default:y((()=>[O(p("div",{class:"v-dropdown-menu__container",style:g({"z-index":e.menu.containerZIndex})},[p("div",k,[m(e.$slots,"header")]),p("div",$,[m(e.$slots,"body")]),p("div",x,[m(e.$slots,"footer")])],4),[[h,e.menu.isOpen]])])),_:3},8,["name"])],64)):_("",!0),"hover"===e.menu.mode?(s(),u(c,{key:1},[p("div",{class:"v-dropdown-menu__trigger",ref:"triggerRef",onMouseover:n[1]||(n[1]=v((function(){return e.show&&e.show(...arguments)}),["prevent"])),onMouseleave:n[2]||(n[2]=v((function(){return e.hide&&e.hide(...arguments)}),["prevent"]))},[m(e.$slots,"trigger")],544),f(w,{name:e.menu.transition},{default:y((()=>[O(p("div",{class:"v-dropdown-menu__container",style:g({"z-index":e.menu.containerZIndex}),onMouseover:n[3]||(n[3]=v((function(){return e.show&&e.show(...arguments)}),["prevent"])),onMouseleave:n[4]||(n[4]=v((function(){return e.hide&&e.hide(...arguments)}),["prevent"]))},[p("div",q,[m(e.$slots,"header")]),p("div",B,[m(e.$slots,"body")]),p("div",I,[m(e.$slots,"footer")])],36),[[h,e.menu.isOpen]])])),_:3},8,["name"])],64)):_("",!0),e.menu.overlay&&e.menu.closeOnClickOutside&&"click"===e.menu.mode?O((s(),u("div",{key:2,class:"v-dropdown-menu__overlay",ref:"overlayRef",style:g({"background-color":e.menu.overlayBgColor,"z-index":e.menu.overlayZIndex}),onMousedown:n[5]||(n[5]=v((function(){return e.hide&&e.hide(...arguments)}),["prevent"]))},null,36)),[[h,e.menu.isOpen]]):_("",!0)],2)};var Z=(()=>{const e=C;return e.install=n=>{n.component("DropdownMenu",e)},e})();export{Z as default};
