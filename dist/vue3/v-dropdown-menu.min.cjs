"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue"),n=e.defineComponent({name:"DropdownMenu",props:{isOpen:{type:Boolean,required:!1,default:!1},mode:{type:String,required:!1,default:"click"},dropup:{type:Boolean,required:!1,default:!1},direction:{type:String,required:!1,default:"left"},closeOnClickOutside:{type:Boolean,required:!1,default:!0},withDropdownCloser:{type:Boolean,required:!1,default:!1},containerZIndex:{type:String,required:!1,default:"994"},overlay:{type:Boolean,required:!1,default:!0},overlayBgColor:{type:String,required:!1,default:"rgba(0, 0, 0, 0.2)"},overlayZIndex:{type:String,required:!1,default:"992"},transition:{type:String,required:!1,default:"default"}},setup:function(n,o){var t=o.emit,r="v-dropdown-menu",i=e.ref(null),d=e.ref(null),l=e.ref(null),c=e.reactive({isOpen:n.isOpen,mode:n.mode,dropup:n.dropup,direction:n.direction,closeOnClickOutside:n.closeOnClickOutside,withDropdownCloser:n.withDropdownCloser,containerZIndex:n.containerZIndex,overlay:n.overlay,overlayBgColor:n.overlayBgColor,overlayZIndex:n.overlayZIndex,transition:n.transition}),u=e.computed((function(){return c.isOpen?"".concat(r,"--active"):null})),a=e.computed((function(){return"click"===c.mode?"".concat(r,"--mode-click"):"".concat(r,"--mode-hover")})),s=e.computed((function(){return c.dropup?"".concat(r,"--dropup"):null})),p=e.computed((function(){return"left"===c.direction?"".concat(r,"--direction-left"):"center"===c.direction?"".concat(r,"--direction-center"):"".concat(r,"--direction-right")}));e.watch((function(){return n.isOpen}),(function(e){"click"===c.mode&&(e?setTimeout((function(){m()}),1):setTimeout((function(){f()}),1))})),e.watch((function(){return c.isOpen}),(function(e){"click"===c.mode&&t(e?"opened":"closed",n)})),e.onMounted((function(){h(),e.nextTick((function(){c.closeOnClickOutside&&v()})),O()})),e.onBeforeUnmount((function(){y(),g()}));var m=function(){c.isOpen=!0},f=function(){c.isOpen=!1},v=function(){window.addEventListener("click",w)},w=function(e){c.isOpen&&(i.value.contains(e.target)||(c.isOpen=!1))},y=function(){c.closeOnClickOutside&&window.removeEventListener("click",w)},h=function(){c.withDropdownCloser&&i.value.querySelectorAll("[dropdown-closer]").forEach((function(e){e.addEventListener("click",(function(){c.isOpen=!1}))}))},O=function(){window.addEventListener("popstate",(function(){c.isOpen&&(c.isOpen=!1)}))},g=function(){window.removeEventListener("popstate",O)};return{rootRef:i,triggerRef:d,overlayRef:l,menu:c,show:m,hide:f,activeClass:u,modeClass:a,dropupClass:s,directionClass:p}}}),o={class:"v-dropdown-menu__header"},t={class:"v-dropdown-menu__body"},r={class:"v-dropdown-menu__footer"},i={class:"v-dropdown-menu__header"},d={class:"v-dropdown-menu__body"},l={class:"v-dropdown-menu__footer"};n.render=function(n,c,u,a,s,p){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["v-dropdown-menu",[n.activeClass,n.modeClass,n.dropupClass,n.directionClass]]),ref:"rootRef"},["click"===n.menu.mode?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",{class:"v-dropdown-menu__trigger",ref:"triggerRef",onClick:c[0]||(c[0]=e.withModifiers((function(e){return n.menu.isOpen=!n.menu.isOpen}),["prevent"]))},[e.renderSlot(n.$slots,"trigger")],512),e.createVNode(e.Transition,{mode:"out-in",name:n.menu.transition},{default:e.withCtx((function(){return[e.withDirectives(e.createElementVNode("div",{class:"v-dropdown-menu__container",style:e.normalizeStyle({"z-index":n.menu.containerZIndex})},[e.createElementVNode("div",o,[e.renderSlot(n.$slots,"header")]),e.createElementVNode("div",t,[e.renderSlot(n.$slots,"body")]),e.createElementVNode("div",r,[e.renderSlot(n.$slots,"footer")])],4),[[e.vShow,n.menu.isOpen]])]})),_:3},8,["name"])],64)):e.createCommentVNode("",!0),"hover"===n.menu.mode?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("div",{class:"v-dropdown-menu__trigger",ref:"triggerRef",onMouseover:c[1]||(c[1]=e.withModifiers((function(){return n.show&&n.show.apply(n,arguments)}),["prevent"])),onMouseleave:c[2]||(c[2]=e.withModifiers((function(){return n.hide&&n.hide.apply(n,arguments)}),["prevent"]))},[e.renderSlot(n.$slots,"trigger")],544),e.createVNode(e.Transition,{name:n.menu.transition},{default:e.withCtx((function(){return[e.withDirectives(e.createElementVNode("div",{class:"v-dropdown-menu__container",style:e.normalizeStyle({"z-index":n.menu.containerZIndex}),onMouseover:c[3]||(c[3]=e.withModifiers((function(){return n.show&&n.show.apply(n,arguments)}),["prevent"])),onMouseleave:c[4]||(c[4]=e.withModifiers((function(){return n.hide&&n.hide.apply(n,arguments)}),["prevent"]))},[e.createElementVNode("div",i,[e.renderSlot(n.$slots,"header")]),e.createElementVNode("div",d,[e.renderSlot(n.$slots,"body")]),e.createElementVNode("div",l,[e.renderSlot(n.$slots,"footer")])],36),[[e.vShow,n.menu.isOpen]])]})),_:3},8,["name"])],64)):e.createCommentVNode("",!0),n.menu.overlay&&n.menu.closeOnClickOutside&&"click"===n.menu.mode?e.withDirectives((e.openBlock(),e.createElementBlock("div",{key:2,class:"v-dropdown-menu__overlay",ref:"overlayRef",style:e.normalizeStyle({"background-color":n.menu.overlayBgColor,"z-index":n.menu.overlayZIndex}),onMousedown:c[5]||(c[5]=e.withModifiers((function(){return n.hide&&n.hide.apply(n,arguments)}),["prevent"]))},null,36)),[[e.vShow,n.menu.isOpen]]):e.createCommentVNode("",!0)],2)};var c=function(){var e=n;return e.install=function(n){n.component("DropdownMenu",e)},e}();exports.default=c;