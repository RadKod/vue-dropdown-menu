!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],o):o((e="undefined"!=typeof globalThis?globalThis:e||self).DropdownMenu={},e.Vue)}(this,(function(e,o){"use strict";var n=o.defineComponent({name:"DropdownMenu",props:{isOpen:{type:Boolean,required:!1,default:!1},mode:{type:String,required:!1,default:"click"},dropup:{type:Boolean,required:!1,default:!1},direction:{type:String,required:!1,default:"left"},closeOnClickOutside:{type:Boolean,required:!1,default:!0},withDropdownCloser:{type:Boolean,required:!1,default:!1},containerZIndex:{type:String,required:!1,default:"994"},overlay:{type:Boolean,required:!1,default:!0},overlayBgColor:{type:String,required:!1,default:"rgba(0, 0, 0, 0.2)"},overlayZIndex:{type:String,required:!1,default:"992"},transition:{type:String,required:!1,default:"default"}},setup(e,n){let{emit:t}=n;const r="v-dropdown-menu",i=o.ref(null),d=o.ref(null),l=o.ref(null),s=o.reactive({isOpen:e.isOpen,mode:e.mode,dropup:e.dropup,direction:e.direction,closeOnClickOutside:e.closeOnClickOutside,withDropdownCloser:e.withDropdownCloser,containerZIndex:e.containerZIndex,overlay:e.overlay,overlayBgColor:e.overlayBgColor,overlayZIndex:e.overlayZIndex,transition:e.transition}),a=o.computed((()=>s.isOpen?`${r}--active`:null)),c=o.computed((()=>"click"===s.mode?`${r}--mode-click`:`${r}--mode-hover`)),u=o.computed((()=>s.dropup?`${r}--dropup`:null)),p=o.computed((()=>{let e=null;return e="left"===s.direction?`${r}--direction-left`:"center"===s.direction?`${r}--direction-center`:`${r}--direction-right`,e}));o.watch((()=>e.isOpen),(e=>{"click"===s.mode&&(e?setTimeout((()=>{m()}),1):setTimeout((()=>{v()}),1))})),o.watch((()=>s.isOpen),(o=>{"click"===s.mode&&t(o?"opened":"closed",e)})),o.onMounted((()=>{h(),o.nextTick((()=>{s.closeOnClickOutside&&f()})),g()})),o.onBeforeUnmount((()=>{y(),O()}));const m=()=>{s.isOpen=!0},v=()=>{s.isOpen=!1},f=()=>{window.addEventListener("click",w)},w=e=>{s.isOpen&&(i.value.contains(e.target)||(s.isOpen=!1))},y=()=>{s.closeOnClickOutside&&window.removeEventListener("click",w)},h=()=>{if(s.withDropdownCloser){i.value.querySelectorAll("[dropdown-closer]").forEach((e=>{e.addEventListener("click",(()=>{s.isOpen=!1}))}))}},g=()=>{window.addEventListener("popstate",(()=>{s.isOpen&&(s.isOpen=!1)}))},O=()=>{window.removeEventListener("popstate",g)};return{rootRef:i,triggerRef:d,overlayRef:l,menu:s,show:m,hide:v,activeClass:a,modeClass:c,dropupClass:u,directionClass:p}}});const t={class:"v-dropdown-menu__header"},r={class:"v-dropdown-menu__body"},i={class:"v-dropdown-menu__footer"},d={class:"v-dropdown-menu__header"},l={class:"v-dropdown-menu__body"},s={class:"v-dropdown-menu__footer"};n.render=function(e,n,a,c,u,p){return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(["v-dropdown-menu",[e.activeClass,e.modeClass,e.dropupClass,e.directionClass]]),ref:"rootRef"},["click"===e.menu.mode?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[o.createElementVNode("div",{class:"v-dropdown-menu__trigger",ref:"triggerRef",onClick:n[0]||(n[0]=o.withModifiers((o=>e.menu.isOpen=!e.menu.isOpen),["prevent"]))},[o.renderSlot(e.$slots,"trigger")],512),o.createVNode(o.Transition,{mode:"out-in",name:e.menu.transition},{default:o.withCtx((()=>[o.withDirectives(o.createElementVNode("div",{class:"v-dropdown-menu__container",style:o.normalizeStyle({"z-index":e.menu.containerZIndex})},[o.createElementVNode("div",t,[o.renderSlot(e.$slots,"header")]),o.createElementVNode("div",r,[o.renderSlot(e.$slots,"body")]),o.createElementVNode("div",i,[o.renderSlot(e.$slots,"footer")])],4),[[o.vShow,e.menu.isOpen]])])),_:3},8,["name"])],64)):o.createCommentVNode("",!0),"hover"===e.menu.mode?(o.openBlock(),o.createElementBlock(o.Fragment,{key:1},[o.createElementVNode("div",{class:"v-dropdown-menu__trigger",ref:"triggerRef",onMouseover:n[1]||(n[1]=o.withModifiers((function(){return e.show&&e.show(...arguments)}),["prevent"])),onMouseleave:n[2]||(n[2]=o.withModifiers((function(){return e.hide&&e.hide(...arguments)}),["prevent"]))},[o.renderSlot(e.$slots,"trigger")],544),o.createVNode(o.Transition,{name:e.menu.transition},{default:o.withCtx((()=>[o.withDirectives(o.createElementVNode("div",{class:"v-dropdown-menu__container",style:o.normalizeStyle({"z-index":e.menu.containerZIndex}),onMouseover:n[3]||(n[3]=o.withModifiers((function(){return e.show&&e.show(...arguments)}),["prevent"])),onMouseleave:n[4]||(n[4]=o.withModifiers((function(){return e.hide&&e.hide(...arguments)}),["prevent"]))},[o.createElementVNode("div",d,[o.renderSlot(e.$slots,"header")]),o.createElementVNode("div",l,[o.renderSlot(e.$slots,"body")]),o.createElementVNode("div",s,[o.renderSlot(e.$slots,"footer")])],36),[[o.vShow,e.menu.isOpen]])])),_:3},8,["name"])],64)):o.createCommentVNode("",!0),e.menu.overlay&&e.menu.closeOnClickOutside&&"click"===e.menu.mode?o.withDirectives((o.openBlock(),o.createElementBlock("div",{key:2,class:"v-dropdown-menu__overlay",ref:"overlayRef",style:o.normalizeStyle({"background-color":e.menu.overlayBgColor,"z-index":e.menu.overlayZIndex}),onMousedown:n[5]||(n[5]=o.withModifiers((function(){return e.hide&&e.hide(...arguments)}),["prevent"]))},null,36)),[[o.vShow,e.menu.isOpen]]):o.createCommentVNode("",!0)],2)};var a=(()=>{const e=n;return e.install=o=>{o.component("DropdownMenu",e)},e})();e.default=a,Object.defineProperty(e,"__esModule",{value:!0})}));
